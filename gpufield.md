---
permalink: /gpufield/
title: GPUfield - geekysuavo.github.io
heading: GPUfield
subheading: A fast magnetostatics solver
layout: project
bar: top
---

# Introduction

Magnetic fields are not the simplest beasties to tame. When any precision
is required in the estimated field characteristics of an electromagnet,
coil designers turn to their computers and start running simulations.

# The mathematics

Computing the magnetic field generated by an electric current flowing
through an infinitely narrow wire in a vacuum (or air) is an exceptionally
simple task, requiring the use of the Biot-Savart equation:

{% include equation.html id="01" %}

Without too much headache, any three-dimensional curve may be approximated
by line segments, and the magnetic field at any point may be computed using
a few vector operations! **:)**

For every line segment, the angles between the wire ends (**A** and **B**)
and the computation point (**r**) are calculated:

{% include equation.html id="02" %}
{% include equation.html id="03" %}

Then the magnetic field unit vector is calculated:

{% include equation.html id="04" %}

where...

{% include equation.html id="05" %}

The final magnetic field at **r** is then as follows:

{% include equation.html id="06" %}

Where **A** and **B** are the starting and ending points of each line
segment, **r** is the point at which the field is to be computed, and
**v** is the perpendicular vector from **r** to **AB**.

Whew! Now wasn't that simple?

# Image gallery

I've always fuond magnetic fields to give the most beautiful images, so
here are a few computed results for your enjoyment. **:)**

FIXME

# The code

The GPUfield program runs as an interpreter that parses a very simple set
of commands. Wires are added using _moveto_ and _lineto_ statements, or
through higher-level commands like _arc_, _solenoid_, _maxwell_ or
_golay_. Once the wires are in place, the magnetic field may be
computed along a surface using the _grid_ command, or along an arbitrary
linear trajectory using the _traj_ command.

GPUfield runs all field computations on the graphics card using the CUDA
C API. Calculations that would've taken ten hours on a single CPU core
can be reduced to a few seconds using CUDA, thanks to the embarrassingly
parallel nature of the task.

Enough of my rambling... If you want to check out the source code, the latest
version is available on GitHub:

 * [GPUfield on GitHub](https://github.com/geekysuavo/gpufield)

